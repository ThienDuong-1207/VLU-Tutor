<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLU Tutor - Admin Dashboard</title>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <img src="../images/vlu-logo.jpg" alt="VLU Logo" class="logo">
            <h2>VLU Tutor</h2>
        </div>

        <div class="user-info">
            <img src="https://ui-avatars.com/api/?name=Admin&background=db4437&color=fff" alt="User Avatar">
            <h3 class="user-name">Admin</h3>
            <p class="user-email">admin@vlu.edu.vn</p>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="#" class="nav-link active">
                    <i class="fas fa-home"></i>
                    Tổng quan
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-modal-target="#userManagementModal">
                    <i class="fas fa-users-cog"></i>
                    Quản lý user
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-modal-target="#backupLogsModal">
                    <i class="fas fa-database"></i>
                    Backup & Logs
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="dashboard.logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Đăng xuất
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <h1>Xin chào, <span class="user-name">Admin</span>!</h1>
            <div class="header-actions">
                <button class="btn btn-danger" onclick="clearSystemCache()">
                    <i class="fas fa-broom"></i>
                    Xóa cache
                </button>
            </div>
        </div>

        <!-- System Stats -->
        <div class="dashboard-grid">
            <div class="card stat-card">
                <i class="fas fa-microchip"></i>
                <div class="stat-value">35%</div>
                <div class="stat-label">CPU Usage</div>
            </div>
            <div class="card stat-card">
                <i class="fas fa-memory"></i>
                <div class="stat-value">65%</div>
                <div class="stat-label">Memory Usage</div>
            </div>
            <div class="card stat-card">
                <i class="fas fa-hdd"></i>
                <div class="stat-value">75%</div>
                <div class="stat-label">Disk Usage</div>
            </div>
            <div class="card stat-card">
                <i class="fas fa-users"></i>
                <div class="stat-value">250</div>
                <div class="stat-label">Active Users</div>
            </div>
        </div>

        <!-- System Performance -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Hiệu năng hệ thống</h2>
                <button class="btn btn-primary" onclick="refreshStats()">
                    <i class="fas fa-sync"></i>
                    Làm mới
                </button>
            </div>
            <div class="chart-container">
                <canvas id="performanceChart"></canvas>
            </div>
        </div>

        <!-- Active Sessions -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Phiên đang hoạt động</h2>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Role</th>
                            <th>IP Address</th>
                            <th>Thời gian</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>student@vlu.edu.vn</td>
                            <td>Student</td>
                            <td>192.168.1.100</td>
                            <td>15:30:45</td>
                            <td><span class="badge badge-success">Active</span></td>
                            <td>
                                <button class="btn btn-danger" onclick="terminateSession(1)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>tutor@vlu.edu.vn</td>
                            <td>Tutor</td>
                            <td>192.168.1.101</td>
                            <td>15:25:30</td>
                            <td><span class="badge badge-warning">Idle</span></td>
                            <td>
                                <button class="btn btn-danger" onclick="terminateSession(2)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- System Logs -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">System Logs</h2>
                <button class="btn btn-primary" onclick="downloadLogs()">
                    <i class="fas fa-download"></i>
                    Tải logs
                </button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Thời gian</th>
                            <th>Level</th>
                            <th>Service</th>
                            <th>Message</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>15:30:45</td>
                            <td><span class="badge badge-warning">WARNING</span></td>
                            <td>Authentication</td>
                            <td>Failed login attempt from IP 192.168.1.105</td>
                        </tr>
                        <tr>
                            <td>15:25:30</td>
                            <td><span class="badge badge-success">INFO</span></td>
                            <td>Teams API</td>
                            <td>Successfully synced calendar for user tutor@vlu.edu.vn</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div class="modal" id="userManagementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Quản lý người dùng</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <!-- User Management Filters -->
                <div class="filter-section">
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="Tìm kiếm theo tên, email..." onkeyup="filterUsers()">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="filter-group">
                        <select id="roleFilter" onchange="filterUsers()">
                            <option value="">Tất cả vai trò</option>
                            <option value="student">Student</option>
                            <option value="tutor">Tutor</option>
                            <option value="center">Center</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <select id="statusFilter" onchange="filterUsers()">
                            <option value="">Tất cả trạng thái</option>
                            <option value="active">Đang hoạt động</option>
                            <option value="inactive">Không hoạt động</option>
                            <option value="suspended">Tạm khóa</option>
                        </select>
                    </div>
                </div>

                <!-- User Statistics -->
                <div class="user-stats">
                    <div class="stat-item">
                        <i class="fas fa-users"></i>
                        <span>Tổng cộng: <strong id="totalUsers">63</strong></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-user-graduate"></i>
                        <span>Student: <strong id="studentCount">50</strong></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span>Tutor: <strong id="tutorCount">10</strong></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-user-shield"></i>
                        <span>VluCenter: <strong id="vlucenterCount">2</strong></span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-user-cog"></i>
                        <span>Admin: <strong id="adminCount">1</strong></span>
                    </div>
                </div>

                <!-- User List Table -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Thông tin</th>
                                <th>Vai trò</th>
                                <th>Trạng thái</th>
                                <th>Ngày tạo</th>
                                <th>Lần đăng nhập cuối</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="userTableBody">
                            <!-- Students (50 users) -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Nguyen+Van+A&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Nguyễn Văn A</div>
                                            <div class="user-email">student001@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000123</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>15/01/2024</td>
                                <td>20/03/2024 15:30</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(1)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(1)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(1)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Tran+Thi+B&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Trần Thị B</div>
                                            <div class="user-email">student002@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000124</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>16/01/2024</td>
                                <td>20/03/2024 14:25</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(2)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(2)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(2)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Le+Van+C&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Lê Văn C</div>
                                            <div class="user-email">student003@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000125</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-danger">Tạm khóa</span></td>
                                <td>17/01/2024</td>
                                <td>18/03/2024 10:45</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(3)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(3)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-success btn-sm" onclick="activateUser(3)" title="Kích hoạt">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Pham+Thi+D&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Phạm Thị D</div>
                                            <div class="user-email">student004@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000126</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>18/01/2024</td>
                                <td>20/03/2024 16:15</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(4)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(4)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(4)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Hoang+Van+E&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Hoàng Văn E</div>
                                            <div class="user-email">student005@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000127</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>19/01/2024</td>
                                <td>20/03/2024 13:20</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(5)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(5)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(5)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- More Students -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Vu+Thi+L&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Vũ Thị L</div>
                                            <div class="user-email">student006@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000128</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>20/01/2024</td>
                                <td>20/03/2024 12:45</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(6)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(6)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(6)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Do+Van+M&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Đỗ Văn M</div>
                                            <div class="user-email">student007@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000129</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>21/01/2024</td>
                                <td>20/03/2024 11:30</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(7)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(7)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(7)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Nguyen+Thi+N&background=1a73e8&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Nguyễn Thị N</div>
                                            <div class="user-email">student008@vlu.edu.vn</div>
                                            <div class="user-mssv">MSSV: 21000130</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-primary">Student</span></td>
                                <td><span class="badge badge-danger">Tạm khóa</span></td>
                                <td>22/01/2024</td>
                                <td>19/03/2024 09:15</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(8)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(8)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-success btn-sm" onclick="activateUser(8)" title="Kích hoạt">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- Tutors (10 users) -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Nguyen+Thi+F&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Nguyễn Thị F</div>
                                            <div class="user-email">tutor001@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Lập trình Web</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>10/01/2024</td>
                                <td>20/03/2024 14:25</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(51)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(51)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(51)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Tran+Van+G&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Trần Văn G</div>
                                            <div class="user-email">tutor002@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Cơ sở dữ liệu</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>12/01/2024</td>
                                <td>20/03/2024 15:10</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(52)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(52)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(52)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Le+Thi+H&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Lê Thị H</div>
                                            <div class="user-email">tutor003@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Lập trình Java</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>14/01/2024</td>
                                <td>20/03/2024 16:30</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(53)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(53)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(53)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- More Tutors -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Pham+Van+O&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Phạm Văn O</div>
                                            <div class="user-email">tutor004@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Mạng máy tính</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>16/01/2024</td>
                                <td>20/03/2024 17:45</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(54)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(54)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(54)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Hoang+Thi+P&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Hoàng Thị P</div>
                                            <div class="user-email">tutor005@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Hệ điều hành</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>18/01/2024</td>
                                <td>20/03/2024 18:20</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(55)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(55)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(55)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Vu+Van+Q&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Vũ Văn Q</div>
                                            <div class="user-email">tutor006@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Cấu trúc dữ liệu</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>20/01/2024</td>
                                <td>20/03/2024 19:10</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(56)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(56)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(56)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Do+Thi+R&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Đỗ Thị R</div>
                                            <div class="user-email">tutor007@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Lập trình Python</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>22/01/2024</td>
                                <td>20/03/2024 20:00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(57)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(57)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(57)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Le+Van+S&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Lê Văn S</div>
                                            <div class="user-email">tutor008@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Lập trình C++</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>24/01/2024</td>
                                <td>20/03/2024 21:15</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(58)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(58)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(58)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Tran+Thi+T&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Trần Thị T</div>
                                            <div class="user-email">tutor009@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Lập trình Mobile</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>26/01/2024</td>
                                <td>20/03/2024 22:30</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(59)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(59)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(59)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Nguyen+Van+U&background=0f9d58&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Nguyễn Văn U</div>
                                            <div class="user-email">tutor010@vlu.edu.vn</div>
                                            <div class="user-subject">Môn: Trí tuệ nhân tạo</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-success">Tutor</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>28/01/2024</td>
                                <td>20/03/2024 23:45</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(60)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(60)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(60)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- VluCenter (2 users) -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Pham+Van+I&background=db4437&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Phạm Văn I</div>
                                            <div class="user-email">vlucenter001@vlu.edu.vn</div>
                                            <div class="user-department">Phòng: Quản lý sinh viên</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-warning">VluCenter</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>05/01/2024</td>
                                <td>20/03/2024 16:15</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(61)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(61)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(61)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Hoang+Thi+K&background=db4437&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Hoàng Thị K</div>
                                            <div class="user-email">vlucenter002@vlu.edu.vn</div>
                                            <div class="user-department">Phòng: Đào tạo</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-warning">VluCenter</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>08/01/2024</td>
                                <td>20/03/2024 17:00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(62)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(62)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(62)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- Admin (1 user) -->
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <img src="https://ui-avatars.com/api/?name=Admin+User&background=666&color=fff" alt="User" class="user-avatar">
                                        <div>
                                            <div class="user-name">Admin User</div>
                                            <div class="user-email">admin@vlu.edu.vn</div>
                                            <div class="user-department">Quản trị hệ thống</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-danger">Admin</span></td>
                                <td><span class="badge badge-success">Đang hoạt động</span></td>
                                <td>01/01/2024</td>
                                <td>20/03/2024 18:30</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="editUser(63)" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-warning btn-sm" onclick="resetPassword(63)" title="Cấp lại mật khẩu">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="suspendUser(63)" title="Tạm khóa">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <button class="btn btn-secondary" onclick="changePage(-1)">Trước</button>
                    <span class="page-info">Trang 1 của 5</span>
                    <button class="btn btn-secondary" onclick="changePage(1)">Sau</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="editUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Chỉnh sửa thông tin người dùng</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label class="form-label">Họ và tên</label>
                        <input type="text" id="editUserName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="editUserEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Vai trò</label>
                        <select id="editUserRole" class="form-control" required>
                            <option value="student">Student</option>
                            <option value="tutor">Tutor</option>
                            <option value="center">Center</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Trạng thái</label>
                        <select id="editUserStatus" class="form-control" required>
                            <option value="active">Đang hoạt động</option>
                            <option value="inactive">Không hoạt động</option>
                            <option value="suspended">Tạm khóa</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ghi chú</label>
                        <textarea id="editUserNote" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveUserChanges()">
                    <i class="fas fa-save"></i>
                    Lưu thay đổi
                </button>
            </div>
        </div>
    </div>

    <!-- Backup & Logs Modal -->
    <div class="modal" id="backupLogsModal">
        <div class="modal-content" style="max-width: 90%; max-height: 90%;">
            <div class="modal-header">
                <h2 class="modal-title">Backup & Logs Management</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <!-- Backup Section -->
                <div class="backup-section">
                    <h3><i class="fas fa-database"></i> Database Backup</h3>
                    <div class="backup-controls">
                        <button class="btn btn-primary" onclick="createBackup()">
                            <i class="fas fa-download"></i>
                            Tạo Backup
                        </button>
                        <button class="btn btn-success" onclick="scheduleBackup()">
                            <i class="fas fa-clock"></i>
                            Lên lịch Backup
                        </button>
                        <button class="btn btn-warning" onclick="restoreBackup()">
                            <i class="fas fa-upload"></i>
                            Khôi phục
                        </button>
                    </div>
                    
                    <div class="backup-list">
                        <h4>Backup History</h4>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Tên file</th>
                                        <th>Kích thước</th>
                                        <th>Ngày tạo</th>
                                        <th>Trạng thái</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>backup_2024_03_20_15_30.sql</td>
                                        <td>45.2 MB</td>
                                        <td>20/03/2024 15:30</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>
                                            <button class="btn btn-primary btn-sm" onclick="downloadBackup('backup_2024_03_20_15_30.sql')">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm" onclick="deleteBackup('backup_2024_03_20_15_30.sql')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>backup_2024_03_19_15_30.sql</td>
                                        <td>44.8 MB</td>
                                        <td>19/03/2024 15:30</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>
                                            <button class="btn btn-primary btn-sm" onclick="downloadBackup('backup_2024_03_19_15_30.sql')">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm" onclick="deleteBackup('backup_2024_03_19_15_30.sql')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>backup_2024_03_18_15_30.sql</td>
                                        <td>44.5 MB</td>
                                        <td>18/03/2024 15:30</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>
                                            <button class="btn btn-primary btn-sm" onclick="downloadBackup('backup_2024_03_18_15_30.sql')">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm" onclick="deleteBackup('backup_2024_03_18_15_30.sql')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Logs Section -->
                <div class="logs-section">
                    <h3><i class="fas fa-file-alt"></i> System Logs</h3>
                    <div class="logs-controls">
                        <div class="filter-group">
                            <select id="logLevelFilter" onchange="filterLogs()">
                                <option value="">Tất cả levels</option>
                                <option value="ERROR">ERROR</option>
                                <option value="WARN">WARN</option>
                                <option value="INFO">INFO</option>
                                <option value="DEBUG">DEBUG</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <select id="logServiceFilter" onchange="filterLogs()">
                                <option value="">Tất cả services</option>
                                <option value="API">API</option>
                                <option value="DB">Database</option>
                                <option value="WEB">Web Server</option>
                                <option value="AUTH">Authentication</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="refreshLogs()">
                            <i class="fas fa-sync"></i>
                            Làm mới
                        </button>
                        <button class="btn btn-success" onclick="exportLogs()">
                            <i class="fas fa-file-export"></i>
                            Xuất logs
                        </button>
                    </div>
                    
                    <div class="logs-container">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Thời gian</th>
                                        <th>Level</th>
                                        <th>Service</th>
                                        <th>Message</th>
                                        <th>IP Address</th>
                                    </tr>
                                </thead>
                                <tbody id="logsTableBody">
                                    <tr>
                                        <td>2024-03-20 15:30:45</td>
                                        <td><span class="badge badge-danger">ERROR</span></td>
                                        <td>API</td>
                                        <td>Failed to connect to database: Connection timeout</td>
                                        <td>192.168.1.100</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:29:30</td>
                                        <td><span class="badge badge-warning">WARN</span></td>
                                        <td>AUTH</td>
                                        <td>Multiple failed login attempts from IP 192.168.1.105</td>
                                        <td>192.168.1.105</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:28:15</td>
                                        <td><span class="badge badge-success">INFO</span></td>
                                        <td>WEB</td>
                                        <td>User session created: user@vlu.edu.vn</td>
                                        <td>192.168.1.102</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:27:45</td>
                                        <td><span class="badge badge-success">INFO</span></td>
                                        <td>DB</td>
                                        <td>Database backup completed successfully</td>
                                        <td>127.0.0.1</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:26:20</td>
                                        <td><span class="badge badge-info">DEBUG</span></td>
                                        <td>API</td>
                                        <td>API request processed: GET /api/users</td>
                                        <td>192.168.1.103</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:25:10</td>
                                        <td><span class="badge badge-success">INFO</span></td>
                                        <td>WEB</td>
                                        <td>Static file served: /css/dashboard.css</td>
                                        <td>192.168.1.104</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:24:35</td>
                                        <td><span class="badge badge-warning">WARN</span></td>
                                        <td>DB</td>
                                        <td>Slow query detected: SELECT * FROM users WHERE email LIKE '%@%'</td>
                                        <td>127.0.0.1</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-20 15:23:50</td>
                                        <td><span class="badge badge-success">INFO</span></td>
                                        <td>AUTH</td>
                                        <td>User logged out: admin@vlu.edu.vn</td>
                                        <td>192.168.1.101</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- System Maintenance -->
                <div class="maintenance-section">
                    <h3><i class="fas fa-tools"></i> System Maintenance</h3>
                    <div class="maintenance-controls">
                        <button class="btn btn-warning" onclick="clearOldLogs()">
                            <i class="fas fa-broom"></i>
                            Dọn logs cũ
                        </button>
                        <button class="btn btn-info" onclick="optimizeDatabase()">
                            <i class="fas fa-database"></i>
                            Tối ưu Database
                        </button>
                        <button class="btn btn-secondary" onclick="checkSystemHealth()">
                            <i class="fas fa-heartbeat"></i>
                            Kiểm tra sức khỏe hệ thống
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/dashboard.js"></script>
    <script>
        let performanceChart;

        // Initialize charts
        function initCharts() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['00:00', '03:00', '06:00', '09:00', '12:00', '15:00', '18:00', '21:00'],
                    datasets: [{
                        label: 'CPU Usage (%)',
                        data: [25, 30, 35, 45, 40, 35, 30, 35],
                        borderColor: '#db4437',
                        tension: 0.4
                    }, {
                        label: 'Memory Usage (%)',
                        data: [55, 60, 65, 70, 75, 65, 60, 65],
                        borderColor: '#4285f4',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'System Performance (24h)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Usage (%)'
                            }
                        }
                    }
                }
            });
        }

        function clearSystemCache() {
            // TODO: Implement cache clearing
            if (confirm('Bạn có chắc muốn xóa cache hệ thống?')) {
                alert('Đang xóa cache hệ thống...');
            }
        }

        function refreshStats() {
            // TODO: Implement stats refresh
            alert('Đang làm mới thống kê hệ thống...');
        }

        function terminateSession(id) {
            // TODO: Implement session termination
            if (confirm('Bạn có chắc muốn ngắt phiên này?')) {
                alert('Đang ngắt phiên #' + id);
            }
        }

        function downloadLogs() {
            // TODO: Implement log download
            alert('Đang tải xuống system logs...');
        }

        // User Management Functions
        function filterUsers() {
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            const roleFilter = document.getElementById('roleFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            
            const rows = document.querySelectorAll('#userTableBody tr');
            
            rows.forEach(row => {
                const userName = row.querySelector('.user-name').textContent.toLowerCase();
                const userEmail = row.querySelector('.user-email').textContent.toLowerCase();
                const userRole = row.querySelector('td:nth-child(2) .badge').textContent.toLowerCase();
                const userStatus = row.querySelector('td:nth-child(3) .badge').textContent.toLowerCase();
                
                const matchesSearch = userName.includes(searchTerm) || userEmail.includes(searchTerm);
                const matchesRole = !roleFilter || userRole.includes(roleFilter);
                const matchesStatus = !statusFilter || userStatus.includes(statusFilter);
                
                if (matchesSearch && matchesRole && matchesStatus) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            
            updateUserStats();
        }

        function updateUserStats() {
            const visibleRows = document.querySelectorAll('#userTableBody tr:not([style*="display: none"])');
            const totalUsers = visibleRows.length;
            
            let studentCount = 0;
            let tutorCount = 0;
            let adminCount = 0;
            
            visibleRows.forEach(row => {
                const role = row.querySelector('td:nth-child(2) .badge').textContent.toLowerCase();
                if (role.includes('student')) studentCount++;
                else if (role.includes('tutor')) tutorCount++;
                else if (role.includes('admin') || role.includes('center')) adminCount++;
            });
            
            document.getElementById('totalUsers').textContent = totalUsers;
            document.getElementById('studentCount').textContent = studentCount;
            document.getElementById('tutorCount').textContent = tutorCount;
            document.getElementById('adminCount').textContent = adminCount;
        }

        function editUser(userId) {
            // Close user management modal
            const userModal = document.getElementById('userManagementModal');
            if (userModal && userModal.classList.contains('active')) {
                closeModal(userModal);
            }
            
            // Get user data (in real app, this would come from API)
            const userData = getUserData(userId);
            
            // Populate edit form
            document.getElementById('editUserId').value = userId;
            document.getElementById('editUserName').value = userData.name;
            document.getElementById('editUserEmail').value = userData.email;
            document.getElementById('editUserRole').value = userData.role;
            document.getElementById('editUserStatus').value = userData.status;
            document.getElementById('editUserNote').value = userData.note || '';
            
            // Open edit modal
            const editModal = document.getElementById('editUserModal');
            openModal(editModal);
        }

        function getUserData(userId) {
            // Mock data - in real app, this would be an API call
            const users = {
                1: { name: 'Nguyễn Văn A', email: 'student1@vlu.edu.vn', role: 'student', status: 'active', note: '' },
                2: { name: 'Trần Thị B', email: 'tutor1@vlu.edu.vn', role: 'tutor', status: 'active', note: '' },
                3: { name: 'Lê Văn C', email: 'center1@vlu.edu.vn', role: 'center', status: 'active', note: '' },
                4: { name: 'Phạm Thị D', email: 'student2@vlu.edu.vn', role: 'student', status: 'suspended', note: 'Vi phạm quy định' }
            };
            return users[userId] || {};
        }

        function saveUserChanges() {
            const userId = document.getElementById('editUserId').value;
            const userName = document.getElementById('editUserName').value;
            const userEmail = document.getElementById('editUserEmail').value;
            const userRole = document.getElementById('editUserRole').value;
            const userStatus = document.getElementById('editUserStatus').value;
            const userNote = document.getElementById('editUserNote').value;
            
            if (!userName || !userEmail) {
                alert('Vui lòng điền đầy đủ thông tin bắt buộc!');
                return;
            }
            
            // TODO: Send update to API
            console.log('Updating user:', { userId, userName, userEmail, userRole, userStatus, userNote });
            
            // Show success message
            alert('Cập nhật thông tin người dùng thành công!');
            
            // Close edit modal
            const editModal = document.getElementById('editUserModal');
            closeModal(editModal);
            
            // Refresh user list
            loadUsers();
        }

        function resetPassword(userId) {
            if (confirm('Bạn có chắc muốn cấp lại mật khẩu cho người dùng này?')) {
                // TODO: Send reset password request to API
                console.log('Resetting password for user:', userId);
                
                // Generate temporary password
                const tempPassword = generateTempPassword();
                
                alert(`Mật khẩu tạm thời: ${tempPassword}\n\nNgười dùng sẽ nhận được email hướng dẫn đổi mật khẩu.`);
            }
        }

        function generateTempPassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function suspendUser(userId) {
            if (confirm('Bạn có chắc muốn tạm khóa người dùng này?')) {
                // TODO: Send suspend request to API
                console.log('Suspending user:', userId);
                
                alert('Đã tạm khóa người dùng thành công!');
                loadUsers(); // Refresh user list
            }
        }

        function activateUser(userId) {
            if (confirm('Bạn có chắc muốn kích hoạt lại người dùng này?')) {
                // TODO: Send activate request to API
                console.log('Activating user:', userId);
                
                alert('Đã kích hoạt người dùng thành công!');
                loadUsers(); // Refresh user list
            }
        }

        function loadUsers() {
            // TODO: Load users from API
            console.log('Loading users...');
            // In real app, this would fetch data from server
        }

        function changePage(delta) {
            // TODO: Implement pagination
            console.log('Changing page by:', delta);
            // In real app, this would load different page of users
        }

        // Backup & Logs Functions
        function createBackup() {
            if (confirm('Bạn có chắc muốn tạo backup database?')) {
                // TODO: Send backup request to API
                console.log('Creating database backup...');
                
                // Show loading state
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang tạo...';
                btn.disabled = true;
                
                // Simulate backup process
                setTimeout(() => {
                    alert('Backup đã được tạo thành công!');
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    // Refresh backup list
                    loadBackupHistory();
                }, 3000);
            }
        }

        function scheduleBackup() {
            const schedule = prompt('Nhập lịch backup (VD: 0 2 * * * cho 2h sáng hàng ngày):', '0 2 * * *');
            if (schedule) {
                // TODO: Send schedule request to API
                console.log('Scheduling backup with cron:', schedule);
                alert('Đã lên lịch backup thành công!');
            }
        }

        function restoreBackup() {
            const backupFile = prompt('Nhập tên file backup để khôi phục:');
            if (backupFile) {
                if (confirm(`Bạn có chắc muốn khôi phục từ file ${backupFile}? Dữ liệu hiện tại sẽ bị ghi đè!`)) {
                    // TODO: Send restore request to API
                    console.log('Restoring from backup:', backupFile);
                    alert('Đang khôi phục backup...');
                }
            }
        }

        function downloadBackup(filename) {
            // TODO: Send download request to API
            console.log('Downloading backup:', filename);
            alert(`Đang tải xuống file ${filename}...`);
        }

        function deleteBackup(filename) {
            if (confirm(`Bạn có chắc muốn xóa file backup ${filename}?`)) {
                // TODO: Send delete request to API
                console.log('Deleting backup:', filename);
                alert('Đã xóa backup thành công!');
                // Refresh backup list
                loadBackupHistory();
            }
        }

        function loadBackupHistory() {
            // TODO: Load backup history from API
            console.log('Loading backup history...');
        }

        function filterLogs() {
            const levelFilter = document.getElementById('logLevelFilter').value;
            const serviceFilter = document.getElementById('logServiceFilter').value;
            
            const rows = document.querySelectorAll('#logsTableBody tr');
            
            rows.forEach(row => {
                const level = row.querySelector('td:nth-child(2) .badge').textContent;
                const service = row.querySelector('td:nth-child(3)').textContent;
                
                const matchesLevel = !levelFilter || level === levelFilter;
                const matchesService = !serviceFilter || service === serviceFilter;
                
                if (matchesLevel && matchesService) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function refreshLogs() {
            // TODO: Refresh logs from API
            console.log('Refreshing logs...');
            alert('Đang làm mới logs...');
        }

        function exportLogs() {
            const format = prompt('Chọn định dạng xuất (csv/json/xml):', 'csv');
            if (format) {
                // TODO: Send export request to API
                console.log('Exporting logs in format:', format);
                alert(`Đang xuất logs định dạng ${format.toUpperCase()}...`);
            }
        }

        function clearOldLogs() {
            const days = prompt('Xóa logs cũ hơn bao nhiêu ngày?', '30');
            if (days && !isNaN(days)) {
                if (confirm(`Bạn có chắc muốn xóa logs cũ hơn ${days} ngày?`)) {
                    // TODO: Send clear logs request to API
                    console.log('Clearing logs older than', days, 'days');
                    alert('Đang dọn logs cũ...');
                }
            }
        }

        function optimizeDatabase() {
            if (confirm('Bạn có chắc muốn tối ưu database? Quá trình này có thể mất vài phút.')) {
                // TODO: Send optimize request to API
                console.log('Optimizing database...');
                
                // Show loading state
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang tối ưu...';
                btn.disabled = true;
                
                // Simulate optimization process
                setTimeout(() => {
                    alert('Tối ưu database hoàn thành!');
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }, 5000);
            }
        }

        function checkSystemHealth() {
            // TODO: Send health check request to API
            console.log('Checking system health...');
            
            // Show loading state
            const btn = event.target.closest('button');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang kiểm tra...';
            btn.disabled = true;
            
            // Simulate health check
            setTimeout(() => {
                alert('Kiểm tra sức khỏe hệ thống hoàn thành!\n\nTất cả dịch vụ đang hoạt động bình thường.');
                btn.innerHTML = originalText;
                btn.disabled = false;
            }, 2000);
        }

        // Initialize user management
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            // Initialize user stats
            updateUserStats();
        });
    </script>
</body>
</html> 